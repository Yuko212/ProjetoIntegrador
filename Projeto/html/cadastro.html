<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Conta - CiberTech</title>
   
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
   
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <script src="../js/auth.js"></script>
    <main class="login-container">
       
        <section class="login-lateral">
           
            <div class="login-info">
                <h1 class="login-titulo">CiberTech: <br>Seu pedido, do seu jeito!</h1>
                <p class="login-subtitulo">
                    Personalize o seu pedido, escolha entre blocos simples ou duplos e 3 cores de lâminas.
                </p>
            </div>

            <div class="login-logo-rodape">
                <a href="index.html" class="logo">
                    <span class="logo-text">CiberTech</span>
                </a>
            </div>

        </section>

        <section class="login-formulario">
           
            <div class="login-box">
               
                <nav class="login-abas">
                    <a href="login.html" class="login-aba-link">Login</a>
                    <span class="login-aba-ativo">Criar conta</span>
                </nav>

                <form class="login-form" id="cadastroForm">
                   
                    <div class="input-grupo">
                        <label for="nome" class="sr-apenas">Nome completo</label>
                        <input type="text" id="nome" placeholder="Nome completo" class="login-input" required>
                    </div>

                    <div class="input-grupo">
                        <label for="email" class="sr-apenas">E-mail</label>
                        <input type="email" id="email" placeholder="E-mail" class="login-input" required>
                    </div>

                    <div class="input-grupo">
                        <label for="senha" class="sr-apenas">Crie uma senha</label>
                        <input type="password" id="senha" placeholder="Crie uma senha" class="login-input" required>
                    </div>

                    <div class="input-grupo">
                        <label for="confirma-senha" class="sr-apenas">Confirme sua senha</label>
                        <input type="password" id="confirma-senha" placeholder="Confirme sua senha" class="login-input" required>
                    </div>

                    <button type="submit" class="botao-login">
                        Criar conta
                    </button>
                </form>

            </div>

        </section>

    </main>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.querySelector(".login-form");

    form.addEventListener("submit", async (event) => {
        event.preventDefault();

        const nome = document.getElementById("nome").value.trim();
        const email = document.getElementById("email").value.trim();
        const senha = document.getElementById("senha").value.trim();
        const confirma = document.getElementById("confirma-senha").value.trim();

        if (!nome || !email || !senha || !confirma) {
            alert("Preencha todos os campos.");
            return;
        }

        if (senha !== confirma) {
            alert("As senhas não coincidem.");
            return;
        }

        try {
            const resposta = await fetch("http://localhost:1880/cadastro", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    nome,
                    email,
                    senha
                })
            });

            const resultado = await resposta.json();

            if (resultado.success === true) {
                alert(resultado.message);
                window.location.href = "login.html";
            } else {
                alert("Erro: " + (resultado.message || "Erro desconhecido"));
            }

        } catch (erro) {
            console.error("Erro ao enviar cadastro:", erro);
            alert("Falha ao conectar ao servidor.");
        }
    });
});
</script>

</body>
</html>

